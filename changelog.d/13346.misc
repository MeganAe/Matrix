Fix long-standing bug where Synapse sometimes asked many different remote hosts for the same event.
