Fix a long-standing bug where invalid data could cause errors when calculating the presentable room name for push.
