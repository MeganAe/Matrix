Add infrastructure to support different event formats
