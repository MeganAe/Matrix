Refactor the search code for improved readability.
