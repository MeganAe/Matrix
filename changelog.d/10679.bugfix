Improve ServerNoticeServlet to avoid duplicate requests and add unit tests.