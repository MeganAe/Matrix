Improve and fix type hints.